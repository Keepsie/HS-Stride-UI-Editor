<UserControl x:Class="HS.Stride.UI.Editor.Views.PropertyPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:HS.Stride.UI.Editor.Views"
             xmlns:controls="clr-namespace:HS.Stride.UI.Editor.Controls">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Styles/ModernTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Background="Transparent" Padding="0,0,8,0">
        <StackPanel x:Name="PropertyContainer" Margin="0,0,4,0">
            <!-- No Selection Message -->
            <TextBlock x:Name="NoSelectionText"
                       Text="Select an element to view properties"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontSize="12"
                       Margin="0,8"
                       TextWrapping="Wrap"
                       Visibility="Visible"/>

            <!-- Property Categories -->
            <StackPanel x:Name="PropertyCategories" Visibility="Collapsed">

                <!-- Name Property (Moved from Misc) -->
                <StackPanel Margin="0,0,0,8">
                    <TextBlock Text="Name" Style="{StaticResource PropertyLabel}"/>
                    <TextBox x:Name="PropName" Style="{StaticResource ModernTextBox}"/>
                </StackPanel>

                <!-- Lock Toggle - Prevents canvas selection when locked -->
                <Grid Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Locked" Style="{StaticResource PropertyLabel}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <CheckBox Grid.Column="1" x:Name="PropIsLocked" HorizontalAlignment="Left" VerticalAlignment="Center"
                              ToolTip="When locked, element cannot be selected on canvas. Use hierarchy to select."/>
                </Grid>

                <!-- Allow Canvas Overflow - Let element extend outside canvas bounds -->
                <Grid Margin="0,0,0,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Allow Overflow" Style="{StaticResource PropertyLabel}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <CheckBox Grid.Column="1" x:Name="PropAllowOverflow" HorizontalAlignment="Left" VerticalAlignment="Center"
                              ToolTip="Allow element to be positioned outside canvas bounds (for overlays, edge-bleeding elements)."/>
                </Grid>

                <!-- Apply button removed - all properties now update in real-time -->

                <!-- LAYOUT SECTION -->
                <Expander Header="Layout" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12">
                    <StackPanel Margin="0,8,0,0">
                        <!-- Position -->
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Position" Style="{StaticResource PropertyLabel}"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border Grid.Column="0" Background="{StaticResource InputBackgroundBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="6" Padding="8,6">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="X" Foreground="#FFEF4444" FontWeight="SemiBold" FontSize="12" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <controls:DraggableNumericTextBox Grid.Column="1" x:Name="PropX" Style="{StaticResource ModernTextBox}" BorderThickness="0" Background="Transparent" Padding="0" VerticalAlignment="Center" StepSize="1" MinValue="0" MaxValue="9999"/>
                                    </Grid>
                                </Border>
                                <Border Grid.Column="2" Background="{StaticResource InputBackgroundBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="6" Padding="8,6">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Y" Foreground="#FF22C55E" FontWeight="SemiBold" FontSize="12" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <controls:DraggableNumericTextBox Grid.Column="2" x:Name="PropY" Style="{StaticResource ModernTextBox}" BorderThickness="0" Background="Transparent" Padding="0" VerticalAlignment="Center" StepSize="1" MinValue="0" MaxValue="9999"/>
                                    </Grid>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Size -->
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Size" Style="{StaticResource PropertyLabel}"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="8"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border Grid.Column="0" Background="{StaticResource InputBackgroundBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="6" Padding="8,6">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W" Foreground="{StaticResource TextSecondaryBrush}" FontWeight="SemiBold" FontSize="12" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <controls:DraggableNumericTextBox Grid.Column="1" x:Name="PropWidth" Style="{StaticResource ModernTextBox}" BorderThickness="0" Background="Transparent" Padding="0" VerticalAlignment="Center" StepSize="1" MinValue="10" MaxValue="9999"/>
                                    </Grid>
                                </Border>
                                <Border Grid.Column="2" Background="{StaticResource InputBackgroundBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="6" Padding="8,6">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="H" Foreground="{StaticResource TextSecondaryBrush}" FontWeight="SemiBold" FontSize="12" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                        <controls:DraggableNumericTextBox Grid.Column="1" x:Name="PropHeight" Style="{StaticResource ModernTextBox}" BorderThickness="0" Background="Transparent" Padding="0" VerticalAlignment="Center" StepSize="1" MinValue="10" MaxValue="9999"/>
                                    </Grid>
                                </Border>
                            </Grid>
                        </StackPanel>

                        <!-- Alignment - Hidden: confusing UX (controls position relative to parent, not content alignment) -->
                        <!-- Kept for Stride compatibility - values still load/save properly -->
                        <StackPanel Margin="0,0,0,12" Visibility="Collapsed">
                            <TextBlock Text="Horizontal Alignment" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropHAlign" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Left"/>
                                <ComboBoxItem Content="Center"/>
                                <ComboBoxItem Content="Right"/>
                                <ComboBoxItem Content="Stretch" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0" Visibility="Collapsed">
                            <TextBlock Text="Vertical Alignment" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropVAlign" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Top"/>
                                <ComboBoxItem Content="Center"/>
                                <ComboBoxItem Content="Bottom"/>
                                <ComboBoxItem Content="Stretch" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- APPEARANCE SECTION -->
                <Expander Header="Appearance" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Background Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid Width="24" Height="24" Margin="0,0,8,0">
                                        <!-- Checkered background to show transparency -->
                                        <Rectangle Fill="#404040" RadiusX="4" RadiusY="4"/>
                                        <Rectangle Fill="#606060" RadiusX="4" RadiusY="4" Width="12" Height="12" HorizontalAlignment="Left" VerticalAlignment="Top"/>
                                        <Rectangle Fill="#606060" RadiusX="4" RadiusY="4" Width="12" Height="12" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                        <!-- Actual color preview on top -->
                                        <Rectangle x:Name="PropBgColorPreview" RadiusX="4" RadiusY="4" Stroke="#808080" StrokeThickness="1"/>
                                    </Grid>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropBgColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Opacity" Style="{StaticResource PropertyLabel}"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="PropOpacity" Grid.Column="0" Minimum="0" Maximum="1" Value="1" TickFrequency="0.1" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                <TextBlock x:Name="PropOpacityText" Grid.Column="1" Text="100%" Foreground="{StaticResource TextPrimaryBrush}" MinWidth="40" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Z-Index (Sibling Order)" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropZIndex" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="-999" MaxValue="999"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Draw Layer" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropDrawLayer" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Clip To Bounds" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropClipToBounds" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- BEHAVIOR SECTION -->
                <Expander Header="Behavior" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Visibility" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropVisibility" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Visible" IsSelected="True"/>
                                <ComboBoxItem Content="Hidden"/>
                                <ComboBoxItem Content="Collapsed"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Is Enabled" Style="{StaticResource PropertyLabel}" ToolTip="Whether the element is enabled for interaction"/>
                                <CheckBox Grid.Column="1" x:Name="PropIsEnabled" HorizontalAlignment="Right" VerticalAlignment="Center" IsChecked="True"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Can Be Hit By User" Style="{StaticResource PropertyLabel}" ToolTip="Whether the element can be clicked/touched"/>
                                <CheckBox Grid.Column="1" x:Name="PropCanBeHitByUser" HorizontalAlignment="Right" VerticalAlignment="Center" IsChecked="False"/>
                            </Grid>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- IMAGE PROPERTIES -->
                <Expander x:Name="ImageProperties" Header="Image" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Source Mode" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropImageSourceMode" Style="{StaticResource ModernComboBox}" ToolTip="Texture = single image, SpriteSheet = sprite atlas with frames">
                                <ComboBoxItem Content="Texture"/>
                                <ComboBoxItem Content="SpriteSheet" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Image Source" Style="{StaticResource PropertyLabel}"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropImageSource" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,8,0"/>
                                <Button Grid.Column="1" Content="Browse..." Style="{StaticResource ModernButton}" x:Name="PropImageBrowse"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel x:Name="SpriteFrameContainer" Margin="0,0,0,12">
                            <TextBlock Text="Sprite Frame" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropSpriteFrame" Style="{StaticResource ModernTextBox}" ToolTip="Sprite sheet frame index (0 for single images)"/>
                        </StackPanel>

                        <!-- StretchType/Direction - Hidden: chaotic in Stride, editor uses Shift for scaling -->
                        <!-- Kept for Stride compatibility - values still load/save properly -->
                        <StackPanel Margin="0,0,0,12" Visibility="Collapsed">
                            <TextBlock Text="Stretch Type" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropStretchType" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="FillOnStretch" IsSelected="True"/>
                                <ComboBoxItem Content="Fill"/>
                                <ComboBoxItem Content="Uniform"/>
                                <ComboBoxItem Content="UniformToFill"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12" Visibility="Collapsed">
                            <TextBlock Text="Stretch Direction" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropStretchDirection" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Both" IsSelected="True"/>
                                <ComboBoxItem Content="UpOnly"/>
                                <ComboBoxItem Content="DownOnly"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Tint Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropImageTintPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropImageTintButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- TEXT PROPERTIES -->
                <Expander x:Name="TextProperties" Header="Text" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Text" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropText" Style="{StaticResource ModernTextBox}" AcceptsReturn="True" MaxHeight="80" TextWrapping="Wrap"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Font" Style="{StaticResource PropertyLabel}"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropFontFamily" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,8,0"/>
                                <Button Grid.Column="1" Content="Browse..." Style="{StaticResource ModernButton}" x:Name="PropFontBrowse"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Font Size" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropFontSize" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="6" MaxValue="200"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Text Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropTextColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropTextColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Text Alignment" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropTextAlign" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Left" IsSelected="True"/>
                                <ComboBoxItem Content="Center"/>
                                <ComboBoxItem Content="Right"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Wrap Text" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropWrapText" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Disable Snapping" Style="{StaticResource PropertyLabel}" ToolTip="Disable text snapping to pixel grid"/>
                                <CheckBox Grid.Column="1" x:Name="PropDoNotSnapText" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Outline Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropTextOutlineColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropTextOutlineColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Outline Thickness" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropTextOutlineThickness" Style="{StaticResource ModernTextBox}" StepSize="0.5" MinValue="0" MaxValue="10"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- BUTTON PROPERTIES -->
                <Expander x:Name="ButtonProperties" Header="Button" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Button Text" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropButtonText" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Click Mode" Style="{StaticResource PropertyLabel}" ToolTip="When the click event fires"/>
                            <ComboBox x:Name="PropClickMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Release" IsSelected="True"/>
                                <ComboBoxItem Content="Press"/>
                                <ComboBoxItem Content="Hover"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Image Mode" Style="{StaticResource PropertyLabel}" ToolTip="Texture = single images, SpriteSheet = sprite atlas with frames"/>
                            <ComboBox x:Name="PropButtonImageMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Texture"/>
                                <ComboBoxItem Content="SpriteSheet" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>

                        <!-- 3-State Images -->
                        <TextBlock Text="NOT PRESSED IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropButtonNotPressedImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropButtonNotPressedBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropButtonNotPressedFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="MOUSE OVER IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropButtonMouseOverImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropButtonMouseOverBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropButtonMouseOverFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="PRESSED IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropButtonPressedImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropButtonPressedBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropButtonPressedFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- EDITTEXT PROPERTIES -->
                <Expander x:Name="EditTextProperties" Header="Edit Text" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Placeholder Text" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropEditTextPlaceholder" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Max Length" Style="{StaticResource PropertyLabel}" ToolTip="Maximum character count (0 = unlimited)"/>
                            <controls:DraggableNumericTextBox x:Name="PropMaxLength" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="10000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Read Only" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropIsReadOnly" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Input Type" Style="{StaticResource PropertyLabel}" ToolTip="Type of keyboard/input shown"/>
                            <ComboBox x:Name="PropInputType" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="None" IsSelected="True"/>
                                <ComboBoxItem Content="Password"/>
                            </ComboBox>
                        </StackPanel>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Min Lines" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropMinLines" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="1" MaxValue="100"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Max Lines" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropMaxLines" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="1" MaxValue="1000"/>
                            </StackPanel>
                        </Grid>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Caret Width" Style="{StaticResource PropertyLabel}" ToolTip="Width of the cursor in virtual pixels"/>
                                <controls:DraggableNumericTextBox x:Name="PropCaretWidth" Style="{StaticResource ModernTextBox}" StepSize="0.5" MinValue="0" MaxValue="10"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Caret Frequency (Hz)" Style="{StaticResource PropertyLabel}" ToolTip="Caret blink frequency in Hz"/>
                                <controls:DraggableNumericTextBox x:Name="PropCaretFrequency" Style="{StaticResource ModernTextBox}" StepSize="0.1" MinValue="0" MaxValue="10"/>
                            </StackPanel>
                        </Grid>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Caret Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropCaretColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropCaretColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Selection Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropSelectionColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropSelectionColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="IME Selection Color" Style="{StaticResource PropertyLabel}" ToolTip="Color of the IME composition selection"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropIMESelectionColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropIMESelectionColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <!-- EditText 3-State Images (Optional) -->
                        <TextBlock Text="STATE IMAGES (OPTIONAL)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Image Mode" Style="{StaticResource PropertyLabel}" ToolTip="Texture = single images, SpriteSheet = sprite atlas with frames"/>
                            <ComboBox x:Name="PropEditTextImageMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Texture"/>
                                <ComboBoxItem Content="SpriteSheet" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>

                        <TextBlock Text="ACTIVE IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropEditTextActiveImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropEditTextActiveBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropEditTextActiveFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="INACTIVE IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropEditTextInactiveImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropEditTextInactiveBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropEditTextInactiveFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="MOUSE OVER IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropEditTextMouseOverImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropEditTextMouseOverBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropEditTextMouseOverFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- SLIDER PROPERTIES -->
                <Expander x:Name="SliderProperties" Header="Slider" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Minimum Value" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropSliderMinimum" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="-10000" MaxValue="10000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Maximum Value" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropSliderMaximum" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="-10000" MaxValue="10000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Current Value" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropSliderValue" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="-10000" MaxValue="10000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Step" Style="{StaticResource PropertyLabel}" ToolTip="The increment when user interacts with the slider"/>
                            <controls:DraggableNumericTextBox x:Name="PropSliderStep" Style="{StaticResource ModernTextBox}" StepSize="0.01" MinValue="0" MaxValue="1000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Tick Frequency" Style="{StaticResource PropertyLabel}" ToolTip="How often tick marks are displayed"/>
                            <controls:DraggableNumericTextBox x:Name="PropSliderTickFrequency" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="1000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Tick Offset" Style="{StaticResource PropertyLabel}" ToolTip="Starting offset for tick marks"/>
                            <controls:DraggableNumericTextBox x:Name="PropSliderTickOffset" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="1000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Orientation" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropSliderOrientation" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Horizontal" IsSelected="True"/>
                                <ComboBoxItem Content="Vertical"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Display Ticks" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropAreTicksDisplayed" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Snap To Ticks" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropShouldSnapToTicks" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Reversed Direction" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropIsDirectionReversed" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <!-- Track Starting Offsets -->
                        <TextBlock Text="TRACK STARTING OFFSETS" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock Text="Left" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropTrackStartingOffsetLeft" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="2">
                                <TextBlock Text="Top" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropTrackStartingOffsetTop" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Grid.Column="0">
                                <TextBlock Text="Right" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropTrackStartingOffsetRight" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Grid.Column="2">
                                <TextBlock Text="Bottom" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropTrackStartingOffsetBottom" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                        </Grid>

                        <!-- Slider Images -->
                        <TextBlock Text="SLIDER IMAGES (OPTIONAL)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Image Mode" Style="{StaticResource PropertyLabel}" ToolTip="Texture = single images, SpriteSheet = sprite atlas with frames"/>
                            <ComboBox x:Name="PropSliderImageMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Texture"/>
                                <ComboBoxItem Content="SpriteSheet" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>

                        <TextBlock Text="TRACK BACKGROUND" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropSliderTrackBgImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropSliderTrackBgBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropSliderTrackBgFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="TRACK FOREGROUND" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropSliderTrackFgImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropSliderTrackFgBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropSliderTrackFgFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="THUMB IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropSliderThumbImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropSliderThumbBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropSliderThumbFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="MOUSE OVER THUMB" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropSliderMouseOverThumbImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropSliderMouseOverThumbBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropSliderMouseOverThumbFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="TICK IMAGE (OPTIONAL)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropSliderTickImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropSliderTickBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropSliderTickFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- TOGGLEBUTTON PROPERTIES -->
                <Expander x:Name="ToggleButtonProperties" Header="Toggle Button" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Label Text" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropToggleButtonText" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="State" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropToggleState" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="UnChecked" IsSelected="True"/>
                                <ComboBoxItem Content="Checked"/>
                                <ComboBoxItem Content="Indeterminate"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Click Mode" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropToggleClickMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Release" IsSelected="True"/>
                                <ComboBoxItem Content="Press"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Is Three State" Style="{StaticResource PropertyLabel}" ToolTip="Allow Indeterminate state"/>
                                <CheckBox Grid.Column="1" x:Name="PropIsThreeState" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>

                        <!-- ToggleButton 3-State Images -->
                        <TextBlock Text="STATE IMAGES" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Image Mode" Style="{StaticResource PropertyLabel}" ToolTip="Texture = single images, SpriteSheet = sprite atlas with frames"/>
                            <ComboBox x:Name="PropToggleImageMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Texture"/>
                                <ComboBoxItem Content="SpriteSheet" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>

                        <TextBlock Text="CHECKED IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropToggleCheckedImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropToggleCheckedBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropToggleCheckedFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="UNCHECKED IMAGE" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropToggleUncheckedImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropToggleUncheckedBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropToggleUncheckedFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="INDETERMINATE IMAGE (IF THREE STATE)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropToggleIndeterminateImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropToggleIndeterminateBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropToggleIndeterminateFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- STACKPANEL PROPERTIES -->
                <Expander x:Name="StackPanelProperties" Header="Stack Panel" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Orientation" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropStackPanelOrientation" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Vertical" IsSelected="True"/>
                                <ComboBoxItem Content="Horizontal"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Item Virtualization" Style="{StaticResource PropertyLabel}" ToolTip="When enabled, hidden children's measurement, arrangement and draw are avoided"/>
                                <CheckBox Grid.Column="1" x:Name="PropItemVirtualizationEnabled" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                            </Grid>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- GRID PROPERTIES - Hidden: forcing Canvas workflow, Grid is janky in Stride -->
                <!-- Kept for Stride compatibility - values still load/save properly -->
                <Expander x:Name="GridProperties" Header="Grid" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Row Definitions" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropRowDefinitions" Style="{StaticResource ModernTextBox}" ToolTip="Comma-separated values: 1*, 2*, 100, Auto"/>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Column Definitions" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropColumnDefinitions" Style="{StaticResource ModernTextBox}" ToolTip="Comma-separated values: 1*, 2*, 100, Auto"/>
                        </StackPanel>
                        <Grid Margin="0,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Row Spacing" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropRowSpacing" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Column Spacing" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropColumnSpacing" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Expander>

                <!-- GRID CELL PROPERTIES - Hidden: forcing Canvas workflow -->
                <!-- Kept for Stride compatibility - values still load/save properly -->
                <Expander x:Name="GridCellProperties" Header="Grid Cell" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Grid Row" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropGridRow" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="99"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Grid Column" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropGridColumn" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="99"/>
                            </StackPanel>
                        </Grid>
                        <Grid Margin="0,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Row Span" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropGridRowSpan" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="1" MaxValue="99"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Column Span" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropGridColumnSpan" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="1" MaxValue="99"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Expander>

                <!-- SCROLLVIEWER PROPERTIES -->
                <Expander x:Name="ScrollViewerProperties" Header="Scroll Viewer" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Scroll Mode" Style="{StaticResource PropertyLabel}"/>
                            <ComboBox x:Name="PropScrollMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="None"/>
                                <ComboBoxItem Content="Vertical" IsSelected="True"/>
                                <ComboBoxItem Content="Horizontal"/>
                                <ComboBoxItem Content="VerticalHorizontal"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Scroll Bar Thickness" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropScrollBarThickness" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="1" MaxValue="100"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Scrolling Speed" Style="{StaticResource PropertyLabel}"/>
                            <controls:DraggableNumericTextBox x:Name="PropScrollingSpeed" Style="{StaticResource ModernTextBox}" StepSize="10" MinValue="0" MaxValue="5000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Deceleration" Style="{StaticResource PropertyLabel}" ToolTip="Automatic deceleration after user releases finger (virtual pixels)"/>
                            <controls:DraggableNumericTextBox x:Name="PropDeceleration" Style="{StaticResource ModernTextBox}" StepSize="100" MinValue="0" MaxValue="10000"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Scroll Start Threshold" Style="{StaticResource PropertyLabel}" ToolTip="Distance over which a touch move starts scrolling"/>
                            <controls:DraggableNumericTextBox x:Name="PropScrollStartThreshold" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="100"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Touch Scrolling" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropTouchScrollingEnabled" HorizontalAlignment="Right" VerticalAlignment="Center" IsChecked="True"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Snap To Anchors" Style="{StaticResource PropertyLabel}"/>
                                <CheckBox Grid.Column="1" x:Name="PropSnapToAnchors" HorizontalAlignment="Right" VerticalAlignment="Center" IsChecked="True"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Scroll Bar Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropScrollBarColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropScrollBarColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- MODAL ELEMENT PROPERTIES -->
                <Expander x:Name="ModalProperties" Header="Modal" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Is Modal" Style="{StaticResource PropertyLabel}" ToolTip="Block input to elements behind"/>
                                <CheckBox Grid.Column="1" x:Name="PropIsModal" HorizontalAlignment="Right" VerticalAlignment="Center" IsChecked="True"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Overlay Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropOverlayColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropOverlayColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- UNIFORMGRID PROPERTIES - Hidden: forcing Canvas workflow -->
                <!-- Kept for Stride compatibility - values still load/save properly -->
                <Expander x:Name="UniformGridProperties" Header="Uniform Grid" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <Grid Margin="0,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Rows" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropUniformGridRows" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="1" MaxValue="100"/>
                            </StackPanel>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Columns" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropUniformGridColumns" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="1" MaxValue="100"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Expander>

                <!-- CONTENT DECORATOR PROPERTIES (Border, etc.) -->
                <Expander x:Name="ContentDecoratorProperties" Header="Border / Decorator" IsExpanded="True" Style="{StaticResource ModernExpander}" Margin="0,0,0,12" Visibility="Collapsed">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Border Color" Style="{StaticResource PropertyLabel}"/>
                            <Border Background="{StaticResource InputBackgroundBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="8,6">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Rectangle x:Name="PropBorderColorPreview" Width="24" Height="24" StrokeThickness="0" Margin="0,0,8,0" RadiusX="4" RadiusY="4"/>
                                    <TextBlock Grid.Column="1" Text="Click to change" Foreground="{StaticResource TextSecondaryBrush}" FontSize="12" VerticalAlignment="Center"/>
                                    <Button Grid.Column="2" Content="..." Style="{StaticResource ModernButton}" Padding="4,2" x:Name="PropBorderColorButton"/>
                                </Grid>
                            </Border>
                        </StackPanel>

                        <!-- Border Thickness -->
                        <TextBlock Text="BORDER THICKNESS" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,8,0,8"/>
                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="8"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock Text="Left" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropBorderThicknessLeft" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                            <StackPanel Grid.Row="0" Grid.Column="2">
                                <TextBlock Text="Top" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropBorderThicknessTop" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Grid.Column="0">
                                <TextBlock Text="Right" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropBorderThicknessRight" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                            <StackPanel Grid.Row="2" Grid.Column="2">
                                <TextBlock Text="Bottom" Style="{StaticResource PropertyLabel}"/>
                                <controls:DraggableNumericTextBox x:Name="PropBorderThicknessBottom" Style="{StaticResource ModernTextBox}" StepSize="1" MinValue="0" MaxValue="999"/>
                            </StackPanel>
                        </Grid>

                        <!-- Background Image -->
                        <TextBlock Text="BACKGROUND IMAGE (OPTIONAL)" FontSize="10" FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,12,0,8"/>
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Image Mode" Style="{StaticResource PropertyLabel}" ToolTip="Texture = single image, SpriteSheet = sprite atlas with frames"/>
                            <ComboBox x:Name="PropContentDecoratorImageMode" Style="{StaticResource ModernComboBox}">
                                <ComboBoxItem Content="Texture"/>
                                <ComboBoxItem Content="SpriteSheet" IsSelected="True"/>
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,4">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox Grid.Column="0" x:Name="PropBackgroundImage" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Margin="0,0,4,0"/>
                                <Button Grid.Column="1" Content="..." Style="{StaticResource ModernButton}" Padding="6,6" Width="28" x:Name="PropBackgroundImageBrowse"/>
                            </Grid>
                        </StackPanel>
                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="Frame" Style="{StaticResource PropertyLabel}" Margin="0,4,0,4"/>
                            <TextBox x:Name="PropBackgroundImageFrame" Style="{StaticResource ModernTextBox}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>

                <!-- MISC SECTION -->
                <Expander Header="Misc" IsExpanded="False" Style="{StaticResource ModernExpander}" Margin="0,0,0,12">
                    <StackPanel Margin="0,8,0,0">
                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Type" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropType" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Background="#FF0F0F0F"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,0">
                            <TextBlock Text="ID" Style="{StaticResource PropertyLabel}"/>
                            <TextBox x:Name="PropId" IsReadOnly="True" Style="{StaticResource ModernTextBox}" Background="#FF0F0F0F" FontSize="10"/>
                        </StackPanel>
                    </StackPanel>
                </Expander>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>
